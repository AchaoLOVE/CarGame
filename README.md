# CarGame
一个用原生UIKit写的汽车走迷宫小游戏,使用二维数组将地图的路径转换为小格子模型,汽车移动的过程中实时取出对应的地图模型判断,从而实现移动.

![](https://github.com/AchaoLOVE/CarGame/raw/master/carmove.gif)

## 主要思路
* 1.地图信息转成矩阵,就是一个二维数组,每个小的元素是一个有四个参数的字符串
```
    // 第1个参数:列数 x横坐标
    // 第2个参数:行数 y纵坐标
    // 第3个参数:是否是有效区域
    // 第4个参数:支持的方向  上:1 下:2 左:3 右:4
    
    NSArray <NSArray*>*array = @[
                                 @[@"1,1,1,24", @"1,2,1,34", @"1,3,1,34", @"1,4,1,34", @"1,5,1,34", @"1,6,1,34", @"1,7,1,34", @"1,8,1,23"],
                                 @[@"2,1,1,12", @"2,2,0,0", @"2,3,0,0", @"2,4,0,1", @"2,5,0,1", @"2,6,0,0", @"2,7,0,0", @"2,8,1,12"],
                                 @[@"3,1,1,14", @"3,2,1,23", @"3,3,0,0", @"3,4,0,1", @"3,5,0,1", @"3,6,0,1", @"3,7,2,4", @"3,8,1,123"],
                                 @[@"4,1,0,0", @"4,2,1,12", @"4,3,0,0", @"4,4,0,0", @"4,5,0,0", @"4,6,0,0", @"4,7,0,0", @"4,8,1,12"],
                                 @[@"5,1,1,24", @"5,2,1,134", @"5,3,2,3", @"5,4,0,0", @"5,5,0,0", @"5,6,0,0", @"5,7,0,0", @"5,8,1,12"],
                                 @[@"6,1,1,12", @"6,2,0,0", @"6,3,0,0", @"6,4,0,0", @"6,5,0,0", @"6,6,0,0", @"6,7,0,0", @"6,8,1,12"],
                                 @[@"7,1,1,14", @"7,2,1,34", @"7,3,1,34", @"7,4,1,34", @"7,5,1,234", @"7,6,1,34", @"7,7,1,34", @"7,8,1,13"],
                                 @[@"8,1,0,0", @"8,2,0,0", @"8,3,0,0", @"8,4,0,0", @"8,5,1,12", @"8,6,0,0", @"8,7,0,0", @"8,8,0,0"],
                                 @[@"9,1,1,24", @"9,2,1,34", @"9,3,1,23", @"9,4,0,0", @"9,5,1,124", @"9,6,2,3", @"9,7,0,0", @"9,8,0,0"],
                                 @[@"10,1,1,1", @"10,2,0,0", @"10,3,1,12", @"10,4,0,0", @"10,5,1,12", @"10,6,0,0", @"10,7,0,0", @"10,8,0,0"],
                                 @[@"11,1,1,1", @"11,2,0,0", @"11,3,1,14", @"11,4,1,34", @"11,5,1,13", @"11,6,0,0", @"11,7,0,0", @"11,8,0,0"]
                                 ];
```
                                 
* 2.转换后地图就成一格一格,如图
![](https://github.com/AchaoLOVE/CarGame/raw/master/grid.png)


* 3.根据小车移动到的所在格子取出对应的模型来判断小车是否能够移动,并且让小车匀速移动,到达目标位置判断是否是正确答案.
```
 GridModel * grid = [_gridArray objectAtIndex:(_currentGrid.y-1)*8+(_currentGrid.x-1+1)];
                    _currentGrid = grid;
                    _isMoving = YES;
                    [UIView animateWithDuration:0.5f delay:0 options:UIViewAnimationOptionCurveLinear animations:^{
                        self.car.frame = CGRectMake(PW(11)+ (_currentGrid.x-1)%8*PW(40),PW(10)+(_currentGrid.y-1)%11*PW(40), PW(40), PW(40));
                        if (self.carDirection != DirectionTypeRight) {
                            self.carDirection = DirectionTypeRight;
                            self.car.image = [UIImage imageNamed:@"maze_car_right"];
                        }
                    } completion:^(BOOL finished) {
                        self.isMoving = NO;
                        [self handleAnswer];
                    }];
```
